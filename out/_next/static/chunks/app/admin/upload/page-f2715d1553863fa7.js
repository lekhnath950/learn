(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{4228:(e,a,t)=>{Promise.resolve().then(t.bind(t,2880))},2880:(e,a,t)=>{"use strict";t.d(a,{default:()=>p});var s=t(7437),l=t(2265),u=t(5236),r=t(9842);let i=(0,u.ZF)({apiKey:"AIzaSyAofR31OyALLEyMby0eteht5UUGZfa0-tY",authDomain:"learn-a7cf5.firebaseapp.com",projectId:"learn-a7cf5",storageBucket:"learn-a7cf5.firebasestorage.app",messagingSenderId:"919840789397",appId:"1:919840789397:web:48b9951560535f3a1d1c9c",measurementId:"G-5ERWEE1QEN"}),o=(0,r.ad)(i);var n=t(303);let c=e=>e?e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-"):"";var d=t(5097),h=t.n(d);let p=()=>{let[e,a]=(0,l.useState)(null),[t,u]=(0,l.useState)(!0),[i,d]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[m,x]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[_,f]=(0,l.useState)(""),[b,N]=(0,l.useState)(!1),[y,L]=(0,l.useState)(""),[S,w]=(0,l.useState)(""),[C,E]=(0,l.useState)(""),[k,T]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=(0,n.v0)(),t=(0,n.Aj)(e,e=>{a(e),u(!1)});return()=>t()},[]),(0,l.useEffect)(()=>{m&&(async()=>{let e=c(m),a=(0,r.JU)(o,"topics",e),t=await (0,r.QT)(a);if(t.exists()){N(!0);let e=t.data();j(e.title||""),f(e.description||"")}else N(!1),j(""),f("")})()},[m]);let U=async e=>{e.preventDefault(),T("Logging in...");let a=(0,n.v0)();try{await (0,n.e5)(a,i,p),T("Logged in successfully!")}catch(e){(console.error("Login error: ",e),"auth/invalid-credential"===e.code)?T("Incorrect email or password. Please try again."):T("Login failed: ".concat(e.message))}},q=async()=>{let e=(0,n.v0)();try{await (0,n.w7)(e),T("Logged out.")}catch(e){console.error("Logout error: ",e),T("Logout failed: ".concat(e.message))}},A=async a=>{if(a.preventDefault(),!e){T("You must be logged in to upload content.");return}T("Uploading...");let t=c(m),s=c(y);try{let e=(0,r.hJ)(o,"topics",t,"lessons"),a=(await (0,r.Yp)(e)).data().count+1;b||await (0,r.pl)((0,r.JU)(o,"topics",t),{title:v,description:_}),await (0,r.pl)((0,r.JU)(o,"topics",t,"lessons",s),{level:a,title:y,description:S,example:C||null}),T("✅ Lesson uploaded successfully!"),L(""),w(""),E("")}catch(e){console.error("Error uploading document: ",e),T("❌ Error uploading content. Please try again.")}};return t?(0,s.jsx)("div",{className:h()["auth-loading"],children:"Checking authentication status..."}):e?(0,s.jsxs)("div",{className:h()["auth-card"],children:[(0,s.jsxs)("div",{className:h()["auth-header"],children:[(0,s.jsx)("h2",{className:h()["auth-title"],children:"Upload Lesson"}),(0,s.jsx)("button",{onClick:q,className:h()["auth-logout"],children:"Log Out"})]}),(0,s.jsxs)("form",{onSubmit:A,className:h()["auth-form"],children:[(0,s.jsxs)("div",{className:h()["auth-field"],children:[(0,s.jsx)("label",{children:"Topic (slug, e.g., html, css):"}),(0,s.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),required:!0}),b&&(0,s.jsx)("p",{className:h()["auth-message-success"],children:"This topic already exists. Adding lesson."})]}),!b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:h()["auth-field"],children:[(0,s.jsx)("label",{children:"Topic Title:"}),(0,s.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:h()["auth-field"],children:[(0,s.jsx)("label",{children:"Topic Description:"}),(0,s.jsx)("textarea",{value:_,onChange:e=>f(e.target.value),required:!0})]})]}),(0,s.jsx)("hr",{className:h()["auth-divider"]}),(0,s.jsx)("h3",{children:"Lesson Details"}),(0,s.jsxs)("div",{className:h()["auth-field"],children:[(0,s.jsx)("label",{children:"Lesson Title:"}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>L(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:h()["auth-field"],children:[(0,s.jsx)("label",{children:"Description (Markdown):"}),(0,s.jsx)("textarea",{value:S,onChange:e=>w(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:h()["auth-field"],children:[(0,s.jsx)("label",{children:"Example Code Block:"}),(0,s.jsx)("textarea",{value:C,onChange:e=>E(e.target.value)})]}),(0,s.jsx)("button",{type:"submit",className:h()["auth-button"],children:"Upload"}),k&&(0,s.jsx)("p",{className:h()["auth-message-success"],children:k})]})]}):(0,s.jsxs)("div",{className:h()["auth-card"],children:[(0,s.jsx)("h2",{className:h()["auth-title"],children:"Admin Login"}),(0,s.jsxs)("form",{onSubmit:U,className:h()["auth-form"],children:[(0,s.jsx)("input",{type:"email",value:i,onChange:e=>d(e.target.value),placeholder:"Email",required:!0}),(0,s.jsx)("input",{type:"password",value:p,onChange:e=>g(e.target.value),placeholder:"Password",required:!0}),(0,s.jsx)("button",{type:"submit",className:h()["auth-button"],children:"Log In"}),k&&(0,s.jsx)("p",{className:h()["auth-message"],children:k})]})]})}},5097:e=>{e.exports={"auth-card":"upload_auth-card__dlDx6","auth-title":"upload_auth-title___Fdhv","auth-header":"upload_auth-header__i0Tx1","auth-form":"upload_auth-form__oZ2tl","auth-field":"upload_auth-field__b4bJs","auth-button":"upload_auth-button__P80Ho","auth-logout":"upload_auth-logout__vomev","auth-message":"upload_auth-message__cNgBh","auth-message-success":"upload_auth-message-success__AxCdH","auth-divider":"upload_auth-divider__hjQZX","auth-loading":"upload_auth-loading__ERrz8"}}},e=>{var a=a=>e(e.s=a);e.O(0,[188,15,609,67,130,215,744],()=>a(4228)),_N_E=e.O()}]);